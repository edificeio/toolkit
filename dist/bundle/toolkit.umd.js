!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("axios")):"function"==typeof define&&define.amd?define(["exports","axios"],e):e(t.toolkit=t.toolkit||{},t.axios)}(this,function(t,e){"use strict";function i(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function n(t){var e=[];return t.forEach(function(t){e.push(t)}),e}e="default"in e?e.default:e;var r=function(){function t(){}return t.extend=function(e,i,n){var r=function(){var r=i[a];if(n&&n[a]&&r){var c,u=n[a];c=u instanceof Function?{type:u,deps:[]}:{type:u.type,single:u.single,deps:u.deps?u.deps:[]};var h=function(e){var i=new((n=c.type).bind.apply(n,[void 0].concat(c.deps)));return i.mixin?i.mixin(e):t.extend(i,e),i;var n};r instanceof Array&&c.single?(e[a]=[],r.forEach(function(t){e[a].push(h(t))})):e[a]=h(r)}else!r||"object"!=typeof r||r instanceof Array?e[a]=r:e[a]instanceof o?e[a].load(r):(e[a]||(e[a]={}),s.extend(e[a],r))},s=this;for(var a in i)r()},t.castAs=function(t,e,i){void 0===i&&(i={});var n=new t(i);return this.extend(n,e),n},t.castArrayAs=function(e,i,n){void 0===n&&(n=[]);var r=[];return i.forEach(function(i){r.push(t.castAs(e,i,n))}),r},t}(),o=function(t){function e(e,i){void 0===i&&(i={});var n=t.call(this)||this;return n.className=e,n.mixin=i,n}return i(e,t),e.prototype.push=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i-0]=arguments[i];return e.forEach(function(e){e instanceof t.className||(e=r.castAs(t.className,e));for(var i in t.mixin)e[i]=t.mixin[i];Array.prototype.push.call(t,e)}),this.length},e.prototype.load=function(t){var e=this;t.forEach(function(t){e.push(t)})},e.prototype.asArray=function(){return n(this)},e.prototype.toJSON=function(){return n(this)},e}(Array),s=function(){function t(){this.events=new Map}return t.prototype.trigger=function(t,e){this.events[t]&&this.events[t](e)},t.prototype.on=function(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)},t.prototype.off=function(t,e){if(this.events[t]){if(void 0===e)return void(this.events[t]=[]);var i=this.events[t].indexOf(e);i!==-1&&this.events[t].splice(i,1)}},t.prototype.once=function(t,e){var i=this,n=function(r){e(r),i.off(t,n)};this.on(t,n)},t}(),a=function(){function t(t){this.arr=t}return t.prototype.selectAll=function(){for(var t=0;t<this.arr.length;t++)this.arr[t].selected=!0},t.prototype.select=function(t){for(var e=0;e<this.arr.length;e++)this.arr[e].selected=t(this.arr[e])},t.prototype.deselect=function(t){for(var e=0;e<this.arr.length;e++)this.arr[e].selected=!t(this.arr[e])},t.prototype.deselectAll=function(){for(var t=0;t<this.arr.length;t++)this.arr[t].selected=!1},t.prototype.removeSelection=function(){for(var t=[],e=0;e<this.arr.length;e++)this.arr[e].selected&&t.push(this.arr[e]);this.arr.splice(0,this.arr.length);for(var e=0;e<t.length;e++)this.arr.push(t[e])},t.prototype.updateSelected=function(){for(var t=0;t<this.arr.length;t++){var e=this.selectedElements.indexOf(this.arr[t]);this.arr[t].selected&&e===-1?this.selectedElements.push(this.arr[t]):this.arr[t].selected||e===-1||this.selectedElements.splice(e,1)}},Object.defineProperty(t.prototype,"selected",{get:function(){return this.updateSelected(),this.selectedElements},enumerable:!0,configurable:!0}),t}(),c=function(){function t(t,e,i,n,r){this.api=t,this.model=e,this.initialCast=i,this.childrenCasts=n,this.customMixin=r}return t.prototype.parseApi=function(t,e){var i=this;return"function"==typeof t&&(t=t()),t.split(/(:[a-zA-Z0-9_.]+)/).map(function(t){return":"===t.charAt(0)?e&&e[t.substr(1)]||i.model[t.substr(1)]||i[t.substr(1)]||t:t}).join("")},t.prototype.defaultMixin=function(t){var e=this;if(t instanceof Array&&this.model instanceof Array){var i=this.model;i.length=0,t.forEach(function(t){var n={};e.initialCast&&(n=e.initialCast instanceof Function?new e.initialCast:new((o=e.initialCast.type).bind.apply(o,[void 0].concat(e.initialCast.deps)))),r.extend(n,t,e.childrenCasts),i.push(n);var o})}else r.extend(this.model,t,this.childrenCasts)},t.prototype.create=function(t,e){var i=this;if(void 0===e&&(e={}),!this.api.create)throw'[Crud][Api] "create" route is undefined';return this.http.post(this.parseApi(this.api.create,t),t||this.model,e).then(function(e){return i.model instanceof Array&&i.model.push(t),e})},t.prototype.sync=function(t){var e=this;if(void 0===t&&(t={}),!this.api.sync)throw'[Crud][Api] "sync" route is undefined';return this.http.get(this.parseApi(this.api.sync),t).then(function(t){return(e.customMixin||e.defaultMixin).bind(e)(t.data),t})},t.prototype.update=function(t,e){if(void 0===e&&(e={}),!this.api.update)throw'[Crud][Api] "update" route is undefined';return this.http.put(this.parseApi(this.api.update,t),t||this.model,e)},t.prototype.delete=function(t,e){var i=this;if(void 0===e&&(e={}),!this.api.delete)throw'[Crud][Api] "delete" route is undefined';return this.http.delete(this.parseApi(this.api.delete,t),e).then(function(e){return i.model instanceof Array&&i.model.splice(i.model.indexOf(t),1),e})},t}(),u=function(t){function n(){var i=t.apply(this,arguments)||this;return i.http=e,i}return i(n,t),n}(c),h=function(t){function e(e,i,n){var r=t.call(this,e,null,i,n)||this;return r.data=[],r.model=r.data,r.customMixin=r.mixin,r}return i(e,t),e.prototype.mixin=function(t){var e=this;if(!(t&&t instanceof Array))throw"[Crud][Collection] An Array payload is expected.";this.data.length=0,t.forEach(function(t){var i={};e.initialCast&&(i=e.initialCast instanceof Function?new e.initialCast:new((n=e.initialCast.type).bind.apply(n,[void 0].concat(e.initialCast.deps)))),r.extend(i,t,e.childrenCasts),e.data.push(i);var n})},e}(c),p=function(t){function n(i,n,r){var o=t.call(this,i,n,r)||this;return o.http=e,o}return i(n,t),n}(h),l=function(t){function e(e,i){var n=t.call(this,e,null,null,i)||this;return n.model=n,n.customMixin=n.mixin,n}return i(e,t),e.prototype.mixin=function(t){if(!(t&&t instanceof Object))throw"[Crud][Collection] An Object payload is expected.";r.extend(this,t,this.childrenCasts)},e}(c),f=function(t){function n(i,n){var r=t.call(this,i,n)||this;return r.http=e,r}return i(n,t),n}(l);t.Mix=r,t.TypedArray=o,t.Eventer=s,t.Selection=a,t.AbstractCrud=c,t.Crud=u,t.AbstractCollection=h,t.Collection=p,t.AbstractModel=l,t.Model=f,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=toolkit.umd.js.map
